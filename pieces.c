#include "pieces.h"

const char tetris[NUM_OF_PIECES][ROTATIONS][PROWS][PCOLS] = {
	{//T
		{
			{1,1,1,1,1,1,0,0,0,0},
			{1,1,1,1,1,1,0,0,0,0}, 
			{1,1,1,1,1,1,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0}},
		{
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{1,1,1,1,0,0,0,0,0,0},
			{1,1,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0}},
		{
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{0,0,1,1,0,0,0,0,0,0},
			{1,1,1,1,1,1,0,0,0,0},
			{1,1,1,1,1,1,0,0,0,0},
			{1,1,1,1,1,1,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0}},
		{
			{1,1,0,0,0,0,0,0,0,0},
			{1,1,0,0,0,0,0,0,0,0},
			{1,1,0,0,0,0,0,0,0,0},
			{1,1,1,1,0,0,0,0,0,0},
			{1,1,1,1,0,0,0,0,0,0},
			{1,1,0,0,0,0,0,0,0,0},
			{1,1,0,0,0,0,0,0,0,0},
			{1,1,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0}}
	},

	{//L
		{
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,2,2,0,0,0,0,0},
			{2,2,2,2,0,0,0,0,0},
			{2,2,2,2,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0}},
		{
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{2,2,2,2,2,0,0,0,0},
			{2,2,2,2,2,0,0,0,0},
			{2,2,2,2,2,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{2,2,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0}},
		{
			{2,2,2,2,0,0,0,0,0},
			{2,2,2,2,0,0,0,0,0},
			{2,2,2,2,0,0,0,0,0},
			{0,0,2,2,0,0,0,0,0},
			{0,0,2,2,0,0,0,0,0},
			{0,0,2,2,0,0,0,0,0},
			{0,0,2,2,0,0,0,0,0},
			{0,0,2,2,0,0,0,0,0},
			{0,0,2,2,0,0,0,0,0},
			{0,0,2,2,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0}},
		{
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,2,2,0,0,0,0},
			{0,0,0,2,2,0,0,0,0},
			{0,0,0,2,2,0,0,0,0},
			{0,0,0,2,2,0,0,0,0},
			{2,2,2,2,2,0,0,0,0},
			{2,2,2,2,2,0,0,0,0},
			{2,2,2,2,2,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0}}
	},
	
	{//LM
		{
			{0,0,3,3,0,0,0,0,0},
			{0,0,3,3,0,0,0,0,0},
			{0,0,3,3,0,0,0,0,0},
			{0,0,3,3,0,0,0,0,0},
			{0,0,3,3,0,0,0,0,0},
			{0,0,3,3,0,0,0,0,0},
			{0,0,3,3,0,0,0,0,0},
			{3,3,3,3,0,0,0,0,0},
			{3,3,3,3,0,0,0,0,0},
			{3,3,3,3,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0}},
		{
			{3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,3,3,3,0,0,0,0},
                        {3,3,3,3,3,0,0,0,0},
                        {3,3,3,3,3,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0}},
		{
			{3,3,3,3,0,0,0,0,0},
                        {3,3,3,3,0,0,0,0,0},
                        {3,3,3,3,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {3,3,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0}},
		{
			{0,0,0,0,0,0,0,0,0},
                        {0,0,0,3,3,0,0,0,0},
                        {0,0,0,3,3,0,0,0,0},
                        {0,0,0,3,3,0,0,0,0},
                        {0,0,0,3,3,0,0,0,0},
                        {3,3,3,3,3,0,0,0,0},
                        {3,3,3,3,3,0,0,0,0},
                        {3,3,3,3,3,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0}}

	},

	{//I
		{
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0},
			{4,4,0,0,0,0,0,0,0,0}},
		{
			{0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {4,4,4,4,4,4,4,0,0,0},
                        {4,4,4,4,4,4,4,0,0,0},
                        {4,4,4,4,4,4,4,0,0,0},
                        {4,4,4,4,4,4,4,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0}},
		{
			{4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0},
                        {4,4,0,0,0,0,0,0,0,0}},
		{
			{0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {4,4,4,4,4,4,4,0,0,0},
                        {4,4,4,4,4,4,4,0,0,0},
                        {4,4,4,4,4,4,4,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0,0,0,0}}
	},
	
	{//N
		{
			{0,0,0,0,0,0},
			{0,0,5,5,0,0},
			{0,0,5,5,0,0},
			{0,0,5,5,0,0},
			{5,5,5,5,0,0},
			{5,5,5,5,0,0},
			{5,5,5,5,0,0},
			{5,5,0,0,0,0},
			{5,5,0,0,0,0},
			{5,5,0,0,0,0},
			{0,0,0,0,0,0},
			{0,0,0,0,0,0}},
		{
			{0,0,0,0,0,0,0,0,0,0},
			{5,5,5,5,0,0,0,0,0,0},
			{5,5,5,5,0,0,0,0,0,0},
			{5,5,5,5,0,0,0,0,0,0},
			{0,0,5,5,5,5,0,0,0,0},
			{0,0,5,5,5,5,0,0,0,0},
			{0,0,5,5,5,5,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0}},
		{
			{0,0,0,0,0,0},
			{0,0,5,5,0,0},
			{0,0,5,5,0,0},
			{0,0,5,5,0,0},
			{5,5,5,5,0,0},
			{5,5,5,5,0,0},
			{5,5,5,5,0,0},
			{5,5,0,0,0,0},
			{5,5,0,0,0,0},
			{5,5,0,0,0,0},
			{0,0,0,0,0,0},
			{0,0,0,0,0,0}},
		{
			{0,0,0,0,0,0,0,0,0,0},
			{5,5,5,5,0,0,0,0,0,0},
			{5,5,5,5,0,0,0,0,0,0},
			{5,5,5,5,0,0,0,0,0,0},
			{0,0,5,5,5,5,0,0,0,0},
			{0,0,5,5,5,5,0,0,0,0},
			{0,0,5,5,5,5,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0,0,0,0}}
		
	},

	{//NM
		{
			{5,5,0,0,0,0,0,0},
			{5,5,0,0,0,0,0,0},
			{5,5,0,0,0,0,0,0},
			{5,5,0,0,0,0,0,0},
			{5,5,5,5,0,0,0,0},
			{5,5,5,5,0,0,0,0},
			{5,5,5,5,0,0,0,0},
			{0,0,5,5,0,0,0,0},
			{0,0,5,5,0,0,0,0},
			{0,0,5,5,0,0,0,0},
			{0,0,5,5,0,0,0,0},
			{0,0,0,0,0,0,0,0}}
	},

	{//O
		{
			{6,6,6,6,0,0,0},
			{6,6,6,6,0,0,0},
			{6,6,6,6,0,0,0},
			{6,6,6,6,0,0,0},
			{6,6,6,6,0,0,0},
			{6,6,6,6,0,0,0},
			{6,6,6,6,0,0,0},
			{0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0},
			{0,0,0,0,0,0,0}},
		{
			{6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0}},
		{
			{6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0}},
		{
			{6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {6,6,6,6,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0},
                        {0,0,0,0,0,0,0}}
	}
			

};


uint32_t rand(){

	static uint32_t const a = 1103515245;
	static uint32_t const c = 12345;
	static uint32_t const m = (1<<31);
	static uint32_t Xn = 1234544;

	Xn = (a * Xn + c) % m;
	return Xn;
}

Piece get_rand_piece(void){

	enum Pieces p = rand() % NUM_OF_PIECES;

	Piece piece = {
		.piece = p,
		.rotation = ROTATION_NORMAL,
		.x_start = 0,
		.y_start = 0
	};

	return piece;

}
